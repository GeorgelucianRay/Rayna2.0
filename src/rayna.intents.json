[
  {
    "id": "saludo_dias",
    "priority": 103,
    "type": "static",
    "patterns_any": ["buenos dias","buenos días","buen dia","buen día","bon dia"],
    "response": { "text": "¡Buenos días! Soy **Rayna**. ¿Qué necesitas hoy?" }
  },
  {
    "id": "saludo_tardes",
    "priority": 102,
    "type": "static",
    "patterns_any": ["buenas tardes","bona tarda"],
    "response": { "text": "¡Buenas tardes! Aquí **Rayna**. ¿En qué te ayudo?" }
  },
  {
    "id": "saludo_noches",
    "priority": 101,
    "type": "static",
    "patterns_any": ["buenas noches","bona nit"],
    "response": { "text": "¡Buenas noches! Soy **Rayna**. ¿Te echo una mano con algo?" }
  },
  {
    "id": "saludo",
    "priority": 100,
    "type": "static",
    "patterns_any": [
      "hola","buenas","hola rayna","que tal","qué tal",
      "salut","bună","buna",
      "hola,","buenas,","salut,","bună,","buna,",
      "holaa","holaaa","oli","bones"
    ],
    "response": { "text": "¡Hola! Soy **Rayna**, tu transportista virtual. ¿En qué te ayudo?" }
  },
  {
    "id": "quien_eres",
    "priority": 95,
    "type": "static",
    "patterns_any": ["quien eres","quién eres","quien es rayna","quién es rayna","que eres","qué eres","cine ești","cine esti","qui ets"],
    "response": { "text": "Soy Rayna: **R**utas • **A.Y.** Inteligencia Artificial • **N**avegar • **A**sistente. Formal, cercana y rápida 😉." }
  },
  {
    "id": "help",
    "priority": 90,
    "type": "static",
    "patterns_any": [
      "que puedes hacer","qué puedes hacer","ayuda","help","que piedes hacer","que puedes acer",
      "ce poți face","ce poti face","ajutor","ajuda",
      "què pots fer","ajuda'm"
    ],
    "response": { "text": "Puedo abrir **cámaras** por nombre (ej.: «Abre TCB»), mostrar el **anuncio** vigente o ayudarte con **depósito/GPS**. Admin: añadir cámara. Dispecer/Admin: publicar anuncio." }
  },
  {
    "id": "set_anuncio",
    "priority": 85,
    "type": "dialog",
    "patterns_any": ["quiero poner un anuncio","poner anuncio","publicar anuncio","vreau să pun un anunț","vreau sa pun un anunt","vull posar un anunci"],
    "roles_allowed": ["admin","dispecer"],
    "dialog": {
      "await_key": "anuncio_text",
      "ask_text": "Claro, ¿qué anuncio quieres?",
      "save_action": "save_announcement",
      "save_ok": "¡Anuncio actualizado con éxito!",
      "save_err": "Ha ocurrido un error al guardar el anuncio."
    }
  },
  {
    "id": "admin_add_camara",
    "priority": 86,
    "type": "dialog",
    "patterns_any": [
      "quiero añadir una camara","quiero anadir una camara","añadir camara","agregar camara","crear camara","nueva camara",
      "adaugă cameră","adaugă camera","adauga camera","adaug camera","adăuga cameră","adăuga camera","adauga cameră",
      "adaugare cameră","adaugare camera","vreau să adaug o cameră","vreau sa adaug o camera","vreau să adăuga o cameră",
      "vreau sa adauga o camera","add camera"
    ],
    "roles_allowed": ["admin"],
    "dialog": {
      "form": "add_camera_inline",
      "save_action": "insert_camera",
      "save_ok": "¡Listo! Cámara **{{camera.name}}** añadida.",
      "save_err": "No pude añadir la cámara. Revisa el URL."
    }
  },
  {
    "id": "ver_anuncio",
    "priority": 70,
    "type": "action",
    "patterns_any": ["que anuncio hay","qué anuncio hay","ver anuncio","anuncios","ce anunț avem","ce anunt avem","quin anunci hi ha","veure anunci"],
    "action": "show_announcement",
    "response": {
      "text": "Este es el anuncio vigente:",
      "objects": [{ "type": "announcement_box", "content": "{{announcement.content}}" }]
    }
  },

  /* ---------- CÁMARAS: permite “Hola, abre TCB” ---------- */
  {
    "id": "ver_camara",
    "priority": 80,
    "type": "action",
    "patterns_any": [
      "camara","cámara","camera","camere",
      "abre","abrir","ábreme","abreme","abre la camara","abrir camara","abrir cámara",
      "ver camara","ver cámara","muestra camara","mostrar camara",
      "deschide camera","deschide"
    ],
    "negative_any": ["lista","listado","todas","todes","tutti","todas las camaras","todas las cámaras","lista de camaras"],
    "stopwords": [
      "abre","abrir","ábreme","abreme","ver","muestra","mostrar","desplegar","deschide",
      "quiero","pf","pls","por","favor","la","el","una","un","ok","vale","de","del","al","en",
      "hola","buenas","buenos","dias","días","tardes","noches","salut","bună","buna","bon","dia","bona","tarda","nit"
    ],
    "slots": { "cameraName": { "from": "tail_after_patterns_or_single_token", "min_len": 2 } },
    "action": "open_camera",
    "response": {
      "text": "Aquí tienes **{{camera.name}}**. Pulsa el botón para abrirla.",
      "objects": [{
        "type": "card",
        "title": "{{camera.name}}",
        "actions": [{ "type": "open", "label": "Abrir cámara", "route": "{{camera.url}}", "newTab": true }]
      }]
    },
    "not_found": { "text": "No he encontrado la cámara \"{{query}}\"." }
  },

  {
    "id": "gps_list_camaras",
    "priority": 81,
    "type": "action",
    "patterns_any": [
      "que camaras hay","qué camaras hay","qué cámaras hay",
      "lista de camaras","listado camaras","ver todas las camaras",
      "lista camaras","que cámaras hay","que camara hay"
    ],
    "action": "list_all_cameras",
    "response": { "text": "Aquí tienes todas las cámaras disponibles:" }
  },

  /* ---------- NAVEGAR / RUTE ---------- */
  {
    "id": "gps_navegar_a",
    "priority": 88,
    "type": "action",
    "patterns_any": [
      "quiero llegar a","llevar a","llévame a","llevame a","ir a","navegar a","como llego a","cómo llego a",
      "hasta","rumbo a","direccion a","dirección a",
      "vreau sa ajung la","vreau să ajung la","vreau sa merg la","vreau să merg la","du-ma la","du mă la",
      "vull anar a","porta'm a","portam a","anem a"
    ],
    "stopwords": ["a","la","al","el","către","pe","hasta","a la","a el","del","de","en"],
    "slots": { "placeName": { "from": "tail_after_patterns_or_single_token", "min_len": 2 } },
    "action": "gps_route_preview",
    "response": {
      "text": "Claro, aquí tienes la ruta a **{{place.name}}**. Pulsa el mapa o el botón para abrirla en Google Maps.",
      "objects": [
        { "type": "mini_map", "title": "{{place.name}}", "geojson": "{{route.geojson}}", "maps_link": "{{maps_link}}" },
        { "type": "card", "title": "{{place.name}}",
          "actions": [{ "type": "open", "label": "Abrir en Google Maps", "route": "{{maps_link}}", "newTab": true }]
        }
      ]
    },
    "not_found": { "text": "No he encontrado la ubicación \"{{query}}\"." }
  },

  /* ---------- INFO DE LUGAR ---------- */
  {
    "id": "gps_info_de",
    "priority": 87,
    "type": "action",
    "patterns_any": [
      "que hay en","qué hay en","que hay de","qué hay de","que pasa en","qué pasa en",
      "que me puedes decir de","qué me puedes decir de",
      "que sabes de","qué sabes de","que tienes de","qué tienes de",
      "info","informacion","información","detalii",
      "donde esta","dónde está",
      "unde e","unde este","unde-i",
      "on es","on és","on esta","on està","què hi ha a","informació de","informacio de",
      "ce știi despre","ce stii despre","despre"
    ],
    "stopwords": ["de","la","el","en","del","al","despre","pe","a","la","el"],
    "slots": { "placeName": { "from": "tail_after_patterns_or_single_token", "min_len": 2 } },
    "action": "gps_place_info",
    "response": { "text": "Esto es lo que tengo de **{{place.name}}**:" },
    "not_found": { "text": "No he encontrado información de \"{{query}}\"." }
  },

  /* ---------- LISTE ---------- */
  {
    "id": "gps_list_terminale",
    "priority": 62,
    "type": "action",
    "patterns_any": ["que terminales hay","qué terminales hay","lista terminales","ver terminales","quins terminals hi ha","veure terminals"],
    "action": "gps_list",
    "meta": { "table": "gps_terminale", "label": "Terminales" },
    "response": { "text": "Estas son las terminales disponibles:", "objects": [{ "type": "list", "items": "{{items}}" }] }
  },
  {
    "id": "gps_list_parkings",
    "priority": 61,
    "type": "action",
    "patterns_any": [
      "que parkings hay","qué parkings hay","lista parkings","ver parkings",
      "que parking hay","qué parking hay","lista parking","ver parking",
      "quins pàrquings hi ha","veure pàrquings"
    ],
    "action": "gps_list",
    "meta": { "table": "gps_parkings", "label": "Parkings" },
    "response": { "text": "Estos son los parkings disponibles:" }
  },
  {
    "id": "gps_list_servicios",
    "priority": 60,
    "type": "action",
    "patterns_any": ["que servicios hay","qué servicios hay","lista servicios","ver servicios","quins serveis hi ha","veure serveis"],
    "action": "gps_list",
    "meta": { "table": "gps_servicios", "label": "Servicios" },
    "response": { "text": "Estos son los servicios disponibles:", "objects": [{ "type": "list", "items": "{{items}}" }] }
  },

  /* ---------- ATAJOS ---------- */
  {
    "id": "gps_atajos_clientes",
    "priority": 59,
    "type": "static",
    "patterns_any": ["que clientes hay","lista clientes","ver clientes","quins clients hi ha","veure clients"],
    "response": {
      "text": "Hay muchos clientes. Abre la sección para verlos.",
      "objects": [
        { "type": "card", "title": "Clientes",
          "actions": [{ "type": "open", "label": "Ver clientes en GPS", "route": "/gps", "newTab": false }]
        }
      ]
    }
  },

  /* ---------- ALTA DE UBICACIÓN EN CHAT ---------- */
  {
    "id": "gps_add_location_chat",
    "priority": 89,
    "type": "action",
    "patterns_any": [
      "quiero añadir nueva ubicacion","añadir ubicacion","crear ubicacion","nueva ubicacion",
      "quiero añadir un cliente","añadir cliente","nuevo cliente",
      "añadir terminal","nuevo terminal",
      "añadir servicio","nuevo servicio",
      "añadir parking","nuevo parking",
      "vreau sa adaug client","vreau să adaug client","vreau sa adaug locatie","vreau să adaug locație",
      "vull afegir client","vull afegir ubicació","vull afegir ubicacio"
    ],
    "action": "start_gps_add_chat",
    "response": { "text": "Vamos a crearla paso a paso (chat)." }
  }
]