[
  {
    "id": "saludo_dias",
    "priority": 103,
    "type": "static",
    "patterns_any": ["buenos dias","buenos dÃ­as","buen dia","buen dÃ­a","bon dia"],
    "response": { "text": "Â¡Buenos dÃ­as! Soy **Rayna**. Â¿QuÃ© necesitas hoy?" }
  },
  {
    "id": "saludo_tardes",
    "priority": 102,
    "type": "static",
    "patterns_any": ["buenas tardes","bona tarda"],
    "response": { "text": "Â¡Buenas tardes! AquÃ­ **Rayna**. Â¿En quÃ© te ayudo?" }
  },
  {
    "id": "saludo_noches",
    "priority": 101,
    "type": "static",
    "patterns_any": ["buenas noches","bona nit"],
    "response": { "text": "Â¡Buenas noches! Soy **Rayna**. Â¿Te echo una mano con algo?" }
  },
  {
    "id": "saludo",
    "priority": 100,
    "type": "static",
    "patterns_any": [
      "hola","buenas","hola rayna","que tal","quÃ© tal",
      "salut","bunÄƒ","buna",
      "hola,","buenas,","salut,","bunÄƒ,","buna,",
      "holaa","holaaa","oli","bones"
    ],
    "response": { "text": "Â¡Hola! Soy **Rayna**, tu transportista virtual. Â¿En quÃ© te ayudo?" }
  },
  {
    "id": "quien_eres",
    "priority": 95,
    "type": "static",
    "patterns_any": ["quien eres","quiÃ©n eres","quien es rayna","quiÃ©n es rayna","que eres","quÃ© eres","cine eÈ™ti","cine esti","qui ets"],
    "response": { "text": "Soy Rayna: **R**utas â€¢ **A.Y.** Inteligencia Artificial â€¢ **N**avegar â€¢ **A**sistente. Formal, cercana y rÃ¡pida ğŸ˜‰." }
  },
  {
    "id": "help",
    "priority": 90,
    "type": "static",
    "patterns_any": [
      "que puedes hacer","quÃ© puedes hacer","ayuda","help","que piedes hacer","que puedes acer",
      "ce poÈ›i face","ce poti face","ajutor","ajuda",
      "quÃ¨ pots fer","ajuda'm"
    ],
    "response": { "text": "Puedo abrir **cÃ¡maras** por nombre (ej.: Â«Abre TCBÂ»), mostrar el **anuncio** vigente o ayudarte con **depÃ³sito/GPS**. Admin: aÃ±adir cÃ¡mara. Dispecer/Admin: publicar anuncio." }
  },
  {
    "id": "set_anuncio",
    "priority": 85,
    "type": "dialog",
    "patterns_any": ["quiero poner un anuncio","poner anuncio","publicar anuncio","vreau sÄƒ pun un anunÈ›","vreau sa pun un anunt","vull posar un anunci"],
    "roles_allowed": ["admin","dispecer"],
    "dialog": {
      "await_key": "anuncio_text",
      "ask_text": "Claro, Â¿quÃ© anuncio quieres?",
      "save_action": "save_announcement",
      "save_ok": "Â¡Anuncio actualizado con Ã©xito!",
      "save_err": "Ha ocurrido un error al guardar el anuncio."
    }
  },
  {
    "id": "admin_add_camara",
    "priority": 86,
    "type": "dialog",
    "patterns_any": [
      "quiero aÃ±adir una camara","quiero anadir una camara","aÃ±adir camara","agregar camara","crear camara","nueva camara",
      "adaugÄƒ camerÄƒ","adaugÄƒ camera","adauga camera","adaug camera","adÄƒuga camerÄƒ","adÄƒuga camera","adauga camerÄƒ",
      "adaugare camerÄƒ","adaugare camera","vreau sÄƒ adaug o camerÄƒ","vreau sa adaug o camera","vreau sÄƒ adÄƒuga o camerÄƒ",
      "vreau sa adauga o camera","add camera"
    ],
    "roles_allowed": ["admin"],
    "dialog": {
      "form": "add_camera_inline",
      "save_action": "insert_camera",
      "save_ok": "Â¡Listo! CÃ¡mara **{{camera.name}}** aÃ±adida.",
      "save_err": "No pude aÃ±adir la cÃ¡mara. Revisa el URL."
    }
  },
  {
    "id": "ver_anuncio",
    "priority": 70,
    "type": "action",
    "patterns_any": ["que anuncio hay","quÃ© anuncio hay","ver anuncio","anuncios","ce anunÈ› avem","ce anunt avem","quin anunci hi ha","veure anunci"],
    "action": "show_announcement",
    "response": {
      "text": "Este es el anuncio vigente:",
      "objects": [{ "type": "announcement_box", "content": "{{announcement.content}}" }]
    }
  },

  /* ---------- CÃMARAS: permite â€œHola, abre TCBâ€ ---------- */
  {
    "id": "ver_camara",
    "priority": 80,
    "type": "action",
    "patterns_any": [
      "camara","cÃ¡mara","camera","camere",
      "abre","abrir","Ã¡breme","abreme","abre la camara","abrir camara","abrir cÃ¡mara",
      "ver camara","ver cÃ¡mara","muestra camara","mostrar camara",
      "deschide camera","deschide"
    ],
    "negative_any": ["lista","listado","todas","todes","tutti","todas las camaras","todas las cÃ¡maras","lista de camaras"],
    "stopwords": [
      "abre","abrir","Ã¡breme","abreme","ver","muestra","mostrar","desplegar","deschide",
      "quiero","pf","pls","por","favor","la","el","una","un","ok","vale","de","del","al","en",
      "hola","buenas","buenos","dias","dÃ­as","tardes","noches","salut","bunÄƒ","buna","bon","dia","bona","tarda","nit"
    ],
    "slots": { "cameraName": { "from": "tail_after_patterns_or_single_token", "min_len": 2 } },
    "action": "open_camera",
    "response": {
      "text": "AquÃ­ tienes **{{camera.name}}**. Pulsa el botÃ³n para abrirla.",
      "objects": [{
        "type": "card",
        "title": "{{camera.name}}",
        "actions": [{ "type": "open", "label": "Abrir cÃ¡mara", "route": "{{camera.url}}", "newTab": true }]
      }]
    },
    "not_found": { "text": "No he encontrado la cÃ¡mara \"{{query}}\"." }
  },

  {
    "id": "gps_list_camaras",
    "priority": 81,
    "type": "action",
    "patterns_any": [
      "que camaras hay","quÃ© camaras hay","quÃ© cÃ¡maras hay",
      "lista de camaras","listado camaras","ver todas las camaras",
      "lista camaras","que cÃ¡maras hay","que camara hay"
    ],
    "action": "list_all_cameras",
    "response": { "text": "AquÃ­ tienes todas las cÃ¡maras disponibles:" }
  },

  /* ---------- NAVEGAR / RUTE ---------- */
  {
    "id": "gps_navegar_a",
    "priority": 88,
    "type": "action",
    "patterns_any": [
      "quiero llegar a","llevar a","llÃ©vame a","llevame a","ir a","navegar a","como llego a","cÃ³mo llego a",
      "hasta","rumbo a","direccion a","direcciÃ³n a",
      "vreau sa ajung la","vreau sÄƒ ajung la","vreau sa merg la","vreau sÄƒ merg la","du-ma la","du mÄƒ la",
      "vull anar a","porta'm a","portam a","anem a"
    ],
    "stopwords": ["a","la","al","el","cÄƒtre","pe","hasta","a la","a el","del","de","en"],
    "slots": { "placeName": { "from": "tail_after_patterns_or_single_token", "min_len": 2 } },
    "action": "gps_route_preview",
    "response": {
      "text": "Claro, aquÃ­ tienes la ruta a **{{place.name}}**. Pulsa el mapa o el botÃ³n para abrirla en Google Maps.",
      "objects": [
        { "type": "mini_map", "title": "{{place.name}}", "geojson": "{{route.geojson}}", "maps_link": "{{maps_link}}" },
        { "type": "card", "title": "{{place.name}}",
          "actions": [{ "type": "open", "label": "Abrir en Google Maps", "route": "{{maps_link}}", "newTab": true }]
        }
      ]
    },
    "not_found": { "text": "No he encontrado la ubicaciÃ³n \"{{query}}\"." }
  },

  /* ---------- INFO DE LUGAR ---------- */
  {
    "id": "gps_info_de",
    "priority": 87,
    "type": "action",
    "patterns_any": [
      "que hay en","quÃ© hay en","que hay de","quÃ© hay de","que pasa en","quÃ© pasa en",
      "que me puedes decir de","quÃ© me puedes decir de",
      "que sabes de","quÃ© sabes de","que tienes de","quÃ© tienes de",
      "info","informacion","informaciÃ³n","detalii",
      "donde esta","dÃ³nde estÃ¡",
      "unde e","unde este","unde-i",
      "on es","on Ã©s","on esta","on estÃ ","quÃ¨ hi ha a","informaciÃ³ de","informacio de",
      "ce È™tii despre","ce stii despre","despre"
    ],
    "stopwords": ["de","la","el","en","del","al","despre","pe","a","la","el"],
    "slots": { "placeName": { "from": "tail_after_patterns_or_single_token", "min_len": 2 } },
    "action": "gps_place_info",
    "response": { "text": "Esto es lo que tengo de **{{place.name}}**:" },
    "not_found": { "text": "No he encontrado informaciÃ³n de \"{{query}}\"." }
  },

  /* ---------- LISTE ---------- */
  {
    "id": "gps_list_terminale",
    "priority": 62,
    "type": "action",
    "patterns_any": ["que terminales hay","quÃ© terminales hay","lista terminales","ver terminales","quins terminals hi ha","veure terminals"],
    "action": "gps_list",
    "meta": { "table": "gps_terminale", "label": "Terminales" },
    "response": { "text": "Estas son las terminales disponibles:", "objects": [{ "type": "list", "items": "{{items}}" }] }
  },
  {
    "id": "gps_list_parkings",
    "priority": 61,
    "type": "action",
    "patterns_any": [
      "que parkings hay","quÃ© parkings hay","lista parkings","ver parkings",
      "que parking hay","quÃ© parking hay","lista parking","ver parking",
      "quins pÃ rquings hi ha","veure pÃ rquings"
    ],
    "action": "gps_list",
    "meta": { "table": "gps_parkings", "label": "Parkings" },
    "response": { "text": "Estos son los parkings disponibles:" }
  },
  {
    "id": "gps_list_servicios",
    "priority": 60,
    "type": "action",
    "patterns_any": ["que servicios hay","quÃ© servicios hay","lista servicios","ver servicios","quins serveis hi ha","veure serveis"],
    "action": "gps_list",
    "meta": { "table": "gps_servicios", "label": "Servicios" },
    "response": { "text": "Estos son los servicios disponibles:", "objects": [{ "type": "list", "items": "{{items}}" }] }
  },

  /* ---------- ATAJOS ---------- */
  {
    "id": "gps_atajos_clientes",
    "priority": 59,
    "type": "static",
    "patterns_any": ["que clientes hay","lista clientes","ver clientes","quins clients hi ha","veure clients"],
    "response": {
      "text": "Hay muchos clientes. Abre la secciÃ³n para verlos.",
      "objects": [
        { "type": "card", "title": "Clientes",
          "actions": [{ "type": "open", "label": "Ver clientes en GPS", "route": "/gps", "newTab": false }]
        }
      ]
    }
  },

  /* ---------- ALTA DE UBICACIÃ“N EN CHAT ---------- */
  {
    "id": "gps_add_location_chat",
    "priority": 89,
    "type": "action",
    "patterns_any": [
      "quiero aÃ±adir nueva ubicacion","aÃ±adir ubicacion","crear ubicacion","nueva ubicacion",
      "quiero aÃ±adir un cliente","aÃ±adir cliente","nuevo cliente",
      "aÃ±adir terminal","nuevo terminal",
      "aÃ±adir servicio","nuevo servicio",
      "aÃ±adir parking","nuevo parking",
      "vreau sa adaug client","vreau sÄƒ adaug client","vreau sa adaug locatie","vreau sÄƒ adaug locaÈ›ie",
      "vull afegir client","vull afegir ubicaciÃ³","vull afegir ubicacio"
    ],
    "action": "start_gps_add_chat",
    "response": { "text": "Vamos a crearla paso a paso (chat)." }
  }
]